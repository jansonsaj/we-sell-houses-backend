# JANSONSA - We Sell Houses (Backend)

Coursework for 304CEM.

## MongoDB

Configured in [config/db.js](config/db.js)

Useful commands:

- Start: `sudo systemctl start mongod`
- Stop: `sudo systemctl stop mongod`
- Restart: `sudo systemctl restart mongod`
- Shell: `mongo`

## First time set up

1. Configure GIT to use local hooks:
   `git config core.hooksPath .githooks`
1. Install dependencies:
   `npm install`

## Documentation

Documentation resources are served at the same time as the server, but on another port: `3030` by default or specified with `DOCS_PORT` environment variable.

To create documentation:

- OpenAPI specifications is created manually inside [schemas/openapi.yml](schemas/openapi.yml).
- JSDoc documentation is generated by running `npm run jsdoc`. JSDoc can be configured at [jsdoc.conf.json](jsdoc.conf.json).

To find documentation:

1. Run the server using `npm start`.
   - To find OpenAPI specification visit [https://cable-elastic-3030.codio-box.uk/openapi](https://cable-elastic-3030.codio-box.uk/openapi)
   - To find JSDoc visit [https://cable-elastic-3030.codio-box.uk/](https://cable-elastic-3030.codio-box.uk/)

## Image/video upload

This API supports uploading static image and video files. These uploaded files are stored in `/public` directory, which gets created at startup. The application needs sufficient permissions to create and write to this directory. One way to achieve this is by running the application as the root user with `sudo npm start`.

Ideally, the images and videos should not be stored on local filesystem, but instead in a dedicated object storage such as Amazon S3. This is only done for prototyping purposes and should not be used in production.
